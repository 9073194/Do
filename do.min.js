(function(){var a=document,b=window,c={},d={},e=function(a){return a.constructor===Array},f={autoLoad:!0,coreLib:["http://t.douban.com/js/jquery.min.js"],mods:{}},g=a.getElementsByTagName("script"),h=g[g.length],i,j,k=[],l=!1,m=function(b,e,f,h,i){var j=g[0];if(b){if(c[b]){d[b]=!1,h&&h(b,i);return}if(d[b]){setTimeout(function(){m(b,e,f,h,i)},1);return}d[b]=!0;var k,l=e||b.toLowerCase().substring(b.lastIndexOf(".")+1);l==="js"?(k=a.createElement("script"),k.setAttribute("type","text/javascript"),k.setAttribute("src",b),k.setAttribute("async",!0)):l==="css"&&(k=a.createElement("link"),k.setAttribute("type","text/css"),k.setAttribute("rel","stylesheet"),k.setAttribute("href",b),c[b]=!0),f&&(k.charset=f);if(l==="css"){j.parentNode.insertBefore(k,j),h&&h(b,i);return}k.onload=k.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")c[this.getAttribute("src")]=!0,h&&h(this.getAttribute("src"),i),k.onload=k.onreadystatechange=null},j.parentNode.insertBefore(k,j)}},n=function(a){if(a&&e(a)){var b=0,c,d=[],g=f.mods,h=[],i={},j=function(a){var b=0,c,d;if(i[a])return h;i[a]=!0;if(g[a].requires){d=g[a].requires;for(;typeof (c=d[b++])!=="undefined";)g[c]?(j(c),h.push(c)):h.push(c);return h}return h};for(;typeof (c=a[b++])!=="undefined";)g[c]&&g[c].requires&&g[c].requires[0]&&(h=[],i={},d=d.concat(j(c))),d.push(c);return d}},o=function(){l=!0,k.length>0&&(j.apply(this,k),k=[])},p=function(){a.addEventListener?a.removeEventListener("DOMContentLoaded",p,!1):a.attachEvent&&a.detachEvent("onreadystatechange",p),o()},q=function(){if(!l){try{a.documentElement.doScroll("left")}catch(c){return b.setTimeout(q,1)}o()}},r=function(){if(a.readyState==="complete")return b.setTimeout(o,1);var c=!1;if(a.addEventListener)a.addEventListener("DOMContentLoaded",p,!1),b.addEventListener("load",o);else if(a.attachEvent){a.attachEvent("onreadystatechange",p),b.attachEvent("onload",o);try{c=b.frameElement===null}catch(d){}document.documentElement.doScroll&&c&&q()}},s=function(a){a&&e(a)&&(this.queue=a,this.current=null)};s.prototype={_interval:10,start:function(){var a=this;this.current=this.next();this.current?this.run():this.end=!0},run:function(){var a=this,b,c=this.current;typeof c==="function"?(c(),this.start()):typeof c==="string"&&(f.mods[c]?(b=f.mods[c],m(b.path,b.type,b.charset,function(b){a.start()},a)):/\.js|\.css/i.test(c)?m(c,"","",function(a,b){b.start()},a):this.start())},next:function(){return this.queue.shift()}},i=h.getAttribute("data-cfg-autoload"),typeof i==="string"&&(f.autoLoad=i.toLowerCase()==="true"?!0:!1),i=h.getAttribute("data-cfg-corelib"),typeof i==="string"&&(f.coreLib=i.split(",")),j=function(){var a=[].slice.call(arguments),b;f.autoLoad&&(a=f.coreLib.concat(a)),b=new s(n(a)),b.start()},j.add=function(a,b){a&&b&&b.path&&(f.mods[a]=b)},j.ready=function(){var a=[].slice.call(arguments);if(l)return j.apply(this,a);k=k.concat(a)},f.autoLoad&&j(f.coreLib),this.Do=j,r()})()